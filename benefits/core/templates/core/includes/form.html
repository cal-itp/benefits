{% load i18n %}
{% if form.action_url %}

  {% url form.action_url as form_action %}

  <form id="{{ form.id }}" action="{{ form_action }}" method="{{ form.method | default:"post" | upper }}">
    {% csrf_token %}

    <div class="form-field-container {{ form.classes }}">
      {% for field in form %}
        <div class="form-group mb-0{% if field.field.hide %} d-none{% endif %}">
          {# djlint:off #}
          {% if field.label %}
          <label for="{{ field.id_for_label }}" class="form-control-label">{{ field.label }}{% if field.field.required %}<span class="required-label text-body">*</span>{% endif %}
          </label>
          {% endif %}
          {# djlint:on #}

          {{ field }}

          {% if field.help_text %}
            <small class="d-block mt-2 pt-1 small-text form-text text-body">{{ field.help_text }}</small>
          {% endif %}
        </div>
      {% endfor %}
    </div>

    {% if form.submit_value %}
      <div class="pt-8">
        <button class="btn btn-lg btn-primary spinner-hidden d-flex justify-content-center align-items-center"
                data-action="submit"
                type="submit"
                form="{{ form.id }}">
          <span class="btn-text">{{ form.submit_value }}</span>
          <span class="spinner-border spinner-border-sm"></span>
        </button>
      </div>
    {% endif %}

    {% include "core/includes/form-handlers.html" %}
    {% block extra-scripts %}
    {% endblock extra-scripts %}
  </form>
{% endif %}
