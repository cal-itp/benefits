{% extends "core/page.html" %}

{% block container_content %}

    {% block icon_title %}
    {{ block.super }}
    {% endblock %}

    {% block media_list %}
    {{ block.super }}
    {% endblock %}

    {% block paragraph_content %}
    {{ block.super }}
    {% endblock %}

    {% block buttons %}
    {{ block.super }}
    {% endblock %}

{% endblock %}

{% block scripts %}

{% if auth_provider %}

{% load static %}

<script src="{% static "js/oidc-client-ts.min.js" %}" type="text/javascript"></script>

<script type="text/javascript">
    $(function() {
        var settings = {
            authority: "{{ auth_provider.authority }}",
            client_id: "{{ auth_provider.client_id }}",
            redirect_uri: "{{ auth_provider.redirect_uri }}",
            post_logout_redirect_uri: "{{ auth_provider.post_logout_redirect_uri }}",
            response_type: "{{ auth_provider.response_type }}",
            scope: "{{ auth_provider.scope }}",
        };

        $("#login").on("click", function() {
            var mgr = new oidc.UserManager(settings);
            mgr.signinRedirect();
        });
    });
</script>

{% endif %}

{% endblock %}
